<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="img/icon.png" type="image/png">
  <title>Health Records Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f8fafb;
      color: #374151;
      line-height: 1.6;
      margin: 0;
      padding: 0 1rem;
    }
    main {
      max-width: 800px;
      margin: 2rem auto 4rem;
      background: white;
      padding: 2rem 3rem 3rem 3rem;
      border-radius: 0.5rem;
      box-shadow: 0 4px 15px rgb(0 0 0 / 0.1);
    }
    h1 {
      font-weight: 700;
      font-size: 1.5rem;
      letter-spacing: 0.05em;
      margin-bottom: 1.5rem;
    }
    h1 strong {
      color: #2563eb; /* blue-600 */
    }
    h1 span {
      color: #c0782b; /* orange-ish */
    }
    .feature {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .icon-wrapper {
      background-color: #9fb8c2; /* light blue-gray */
      border-radius: 50%;
      width: 56px;
      height: 56px;
      flex-shrink: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 8px;
      box-shadow: inset 0 0 4px rgb(0 0 0 / 0.1);
    }
    .feature-text h2 {
      font-weight: 700;
      margin-bottom: 0.25rem;
      font-size: 1.15rem;
      color: #111827;
    }
    .feature-text p {
      font-weight: 400;
      font-size: 0.95rem;
      color: #4b5563;
    }
    button.login-btn {
      background-color: #0369a1;
      color: white;
      font-weight: 600;
      padding: 0.75rem 2.25rem;
      border-radius: 0.375rem;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
      display: inline-block;
      margin-top: 0.75rem;
      margin-bottom: 3rem;
      box-shadow: 0 3px 8px rgb(3 105 161 / 0.5);
    }
    button.login-btn:hover {
      background-color: #025e7b;
    }
    .footer-text {
      font-weight: 600;
      font-size: 1.05rem;
      margin-bottom: 0.5rem;
      color: #111827;
    }
    .footer-desc {
      font-weight: 400;
      font-size: 0.9rem;
      color: #6b7280;
      max-width: 600px;
    }
    /* Prescription upload/view section */
    #upload-section {
      max-width: 800px;
      margin: 3rem auto 4rem;
      background: white;
      padding: 2rem 3rem 3rem;
      border-radius: 0.5rem;
      box-shadow: 0 4px 15px rgb(0 0 0 / 0.1);
    }
    #upload-section h2 {
      font-weight: 700;
      font-size: 1.4rem;
      margin-bottom: 1rem;
      color: #0f172a;
    }
    #upload-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    #upload-form label {
      font-weight: 600;
      font-size: 1rem;
      color: #334155;
    }
    #upload-form input[type="file"] {
      border: 1px solid #cbd5e1;
      border-radius: 0.375rem;
      padding: 0.5rem;
      cursor: pointer;
    }
    #upload-form button {
      width: fit-content;
      background-color: #2563eb;
      color: white;
      font-weight: 600;
      padding: 0.65rem 2rem;
      border-radius: 0.375rem;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
      box-shadow: 0 3px 7px rgb(37 99 235 / 0.5);
    }
    #upload-form button:hover {
      background-color: #1e40af;
    }
    #prescription-list {
      margin-top: 1rem;
    }
    #prescription-list h3 {
      font-weight: 600;
      color: #1e40af;
      margin-bottom: 0.75rem;
    }
    #prescription-list ul {
      list-style-type: none;
      padding-left: 0;
    }
    #prescription-list ul li {
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
      color: #475569;
      cursor: pointer;
      padding: 0.4rem 0.6rem;
      border-radius: 0.375rem;
      border: 1px solid transparent;
      transition: background-color 0.2s ease;
      user-select: none;
    }
    #prescription-list ul li:hover {
      background-color: #e0e7ff;
      border-color: #6366f1;
    }
    /* Responsive adjustments */
    @media (max-width: 600px) {
      main, #upload-section {
        padding: 1.5rem 1.5rem 2rem;
        margin: 1.5rem 1rem 3rem;
      }
      .feature-text h2 {
        font-size: 1rem;
      }
      h1 {
        font-size: 1.3rem;
      }
    }
  </style>
</head>
<body>
  
  <main aria-label="Health Records Information Section">
    <h1>
      <strong>SIGN IN</strong> <span>TO ACCESS YOUR HEALTH RECORDS</span>
    </h1>

    <section class="feature" aria-labelledby="feature1-title">
      <div class="icon-wrapper" aria-hidden="true">
        <svg width="32" height="32" fill="none" stroke="#1e293b" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false" viewBox="0 0 24 24">
          <path d="M4 5v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6H6a2 2 0 0 0-2 2z"/>
          <line x1="6" y1="12" x2="18" y2="12"/>
          <line x1="6" y1="16" x2="18" y2="16"/>
          <polyline points="9 4 9 9 15 9"/>
        </svg>
      </div>
      <div class="feature-text">
        <h2 id="feature1-title">Receive &amp; Organize Your Health Information</h2>
        <p>
          Apollo 24|7 Personal Health Records will sync all your Health Records in real time from the entire Apollo ecosystem
          ie Apollo Hospitals, Apollo Diagnostics, Apollo 24|7, Apollo Clinics etc. You can use it to view and share your records anytime.
        </p>
      </div>
    </section>

    <section class="feature" aria-labelledby="feature2-title">
      <div class="icon-wrapper" aria-hidden="true">
        <svg width="32" height="32" fill="none" stroke="#1e293b" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false" viewBox="0 0 24 24">
          <circle cx="18" cy="6" r="3"/>
          <path d="M3 20v-2a4 4 0 0 1 4-4h5"/>
          <path d="M9 14h.01"/>
          <path d="M15 14h.01"/>
          <path d="M3 12v-3a4 4 0 0 1 4-4h1"/>
        </svg>
      </div>
      <div class="feature-text">
        <h2 id="feature2-title">Track &amp; Monitor</h2>
        <p>
          Apollo 24|7 Personal Health Records digitizes all your health records and helps in tracking your health parameters
          through health graphs based on your historical values. It helps in understanding your organ's health by analysing abnormal values from your lab reports.
        </p>
      </div>
    </section>

    <section class="feature" aria-labelledby="feature3-title">
      <div class="icon-wrapper" aria-hidden="true">
        <svg width="32" height="32" fill="none" stroke="#1e293b" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false" viewBox="0 0 24 24">
          <path d="M12 1l3 5-3 5-3-5 3-5z"/>
          <circle cx="12" cy="14" r="7"/>
          <circle cx="12" cy="14" r="3"/>
        </svg>
      </div>
      <div class="feature-text">
        <h2 id="feature3-title">Safe &amp; Secure</h2>
        <p>
          Apollo 24|7 Personal Health Record stores all your data in a secure environment and gives you complete control over who can access your Health Records.
        </p>
      </div>
    </section>

    <button type="button" class="login-btn" id="to-login">Login Now</button>

    <section aria-label="Login help">
      <h2 class="footer-text">Not Able To Login?</h2>
      <p class="footer-desc">
        If you are an international patient or having trouble logging in, you can reach out to our customer support for assistance.
      </p>
    </section>
  </main>

  <!-- Prescription Upload/View Section -->
  <section id="upload-section" aria-label="Upload or View Prescription Section">
    <h2>Upload or View Your Prescriptions</h2>
    <form id="upload-form" aria-describedby="upload-desc">
      <label for="prescription-file">Upload Prescription (PDF or Image):</label>
      <input
        type="file"
        id="prescription-file"
        accept=".pdf, image/png, image/jpeg, image/jpg"
        aria-required="true"
      />
      <button type="submit">Upload</button>
    </form>
    <p id="upload-desc" class="footer-desc">
      You can upload your prescriptions and view the list below. Click on a file name to open/view it.
    </p>
    <div id="prescription-list" aria-live="polite" aria-atomic="true">
      <h3>Your Uploaded Prescriptions</h3>
      <ul id="prescriptions-ul" role="list"></ul>
    </div>
  </section>

  <!-- Simple Login Modal (hidden initially) -->
  <dialog id="login-dialog" aria-modal="true" aria-labelledby="login-title" role="dialog">
    <form method="dialog" id="login-form" class="p-6 w-80" style="font-family: inherit;">
      <h3 id="login-title" class="text-xl font-semibold mb-4 text-gray-900">Sign In to Access Your Health Records</h3>
      <label for="username" class="block text-gray-700 mb-1 font-semibold">Username</label>
      <input type="text" id="username" name="username" required class="mb-4 w-full border rounded border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
      <label for="password" class="block text-gray-700 mb-1 font-semibold">Password</label>
      <input type="password" id="password" name="password" required class="mb-4 w-full border rounded border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
      <menu class="flex justify-end gap-2">
        <button id="cancel-login" type="button" class="bg-gray-300 text-gray-700 rounded px-4 py-2 hover:bg-gray-400">Cancel</button>
        <button type="submit" class="bg-blue-600 text-white rounded px-4 py-2 hover:bg-blue-700">Login</button>
      </menu>
    </form>
  </dialog>

  <script>
    // Element references
    const uploadForm = document.getElementById('upload-form');
    const prescriptionsList = document.getElementById('prescriptions-ul');
    const fileInput = document.getElementById('prescription-file');
    const toLoginBtn = document.getElementById('to-login');
    const loginDialog = document.getElementById('login-dialog');
    const loginForm = document.getElementById('login-form');
    const cancelLoginBtn = document.getElementById('cancel-login');

    // Load saved prescriptions from localStorage
    let savedPrescriptions = JSON.parse(localStorage.getItem('prescriptions') || '[]');
    function renderPrescriptions() {
      prescriptionsList.innerHTML = '';
      if (savedPrescriptions.length === 0) {
        const li = document.createElement('li');
        li.textContent = 'No prescriptions uploaded yet.';
        li.style.fontStyle = 'italic';
        prescriptionsList.appendChild(li);
        return;
      }
      savedPrescriptions.forEach((file, idx) => {
        const li = document.createElement('li');
        li.textContent = file.name;
        li.tabIndex = 0;
        li.setAttribute('role', 'button');
        li.setAttribute('aria-label', `View prescription file ${file.name}`);
        li.addEventListener('click', () => openFile(file));
        li.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            openFile(file);
          }
        });
        prescriptionsList.appendChild(li);
      });
    }

    // Open file preview in new tab
    function openFile(file) {
      const url = URL.createObjectURL(dataURLtoBlob(file.dataURL));
      window.open(url, '_blank').focus();
    }

    // Convert base64/dataURL back to Blob
    function dataURLtoBlob(dataurl) {
      const arr = dataurl.split(',');
      const mime = arr[0].match(/:(.*?);/)[1];
      const bstr = atob(arr[1]);
      let n = bstr.length;
      const u8arr = new Uint8Array(n);
      while (n--) {
          u8arr[n] = bstr.charCodeAt(n);
      }
      return new Blob([u8arr], {type: mime});
    }

    // Handle form submission
    uploadForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const file = fileInput.files[0];
      if (!file) {
        alert('Please select a file to upload.');
        return;
      }
      if (!['application/pdf', 'image/png', 'image/jpeg', 'image/jpg'].includes(file.type)) {
        alert('Invalid file type. Please upload PDF or image files.');
        fileInput.value = '';
        return;
      }

      const reader = new FileReader();
      reader.onload = function(event) {
        const dataURL = event.target.result;

        savedPrescriptions.push({
          name: file.name,
          type: file.type,
          dataURL
        });

        localStorage.setItem('prescriptions', JSON.stringify(savedPrescriptions));
        renderPrescriptions();
        uploadForm.reset();
      };
      reader.readAsDataURL(file);
    });

    toLoginBtn.addEventListener('click', () => {
      loginDialog.showModal();
    });

    cancelLoginBtn.addEventListener('click', () => {
      loginDialog.close();
    });

    loginForm.addEventListener('submit', (e) => {
      e.preventDefault();
      // Dummy login, can add real auth here
      alert('Login functionality not implemented in this demo.');
      loginDialog.close();
    });

    // Initial rendering
    renderPrescriptions();
  </script>

</body>
</html>
